{"version":3,"file":"setup.min.js","sources":["../src/setup.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * LearnWise setup module for managing plugin configuration interface.\n * Handles floating button, LTI integration, web services, and live API settings.\n *\n * @module     local_learnwise/setup\n * @copyright  2025 LearnWise <help@learnwise.ai>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(\n    [M.cfg.wwwroot + '/local/learnwise/vendorjs/zenorocha/clipboard.min.js',\n        'core/str', 'core/notification', 'core/fragment', 'core/config', 'core/templates'],\n    function(ClipboardJS, Str, Notification, Fragment, Config, Templates) {\n\n    /**\n     * Application state object containing all configuration settings\n     * @type {Object}\n     * @property {string} environment - Current environment (sandbox/production)\n     * @property {string} floatingButtonAssistantId - Assistant ID for floating button\n     * @property {boolean} showFloatingButton - Whether floating button is enabled\n     * @property {string} ltiAssistantId - Assistant ID for LTI integration\n     * @property {boolean} ltiEnabled - Whether LTI integration is enabled\n     * @property {boolean} webServicesEnabled - Whether web services are enabled\n     * @property {boolean} liveApiEnabled - Whether live API is enabled\n     * @property {boolean} showToast - Whether to show toast notifications\n     */\n    var state = {\n        environment: \"sandbox\",\n        floatingButtonAssistantId: \"\",\n        showFloatingButton: false,\n        ltiAssistantId: \"\",\n        ltiEnabled: false,\n        webServicesEnabled: false,\n        liveApiEnabled: false,\n        aiAssessmentEnabled: false,\n        courseIds: \"\",\n    };\n\n    /**\n     * DOM elements cache for efficient access to form elements and controls\n     * @type {Object}\n     */\n    var elements = {\n        form: document.getElementById('form1'),\n        floatingButtonAssistantId: document.getElementById(\"floatingButtonAssistantId\"),\n        floatingButtonSwitch: document.getElementById(\"floatingButtonSwitch\"),\n        floatingButtonStatus: document.getElementById(\"floatingButtonStatus\"),\n        floatingButtonSwitchWrapper: document.getElementById(\"floatingButtonSwitchWrapper\"),\n        floatingButtonTooltip: document.getElementById(\"floatingButtonTooltip\"),\n\n        ltiAssistantId: document.getElementById(\"ltiAssistantId\"),\n        ltiSwitch: document.getElementById(\"ltiSwitch\"),\n        ltiStatus: document.getElementById(\"ltiStatus\"),\n        ltiSwitchWrapper: document.getElementById(\"ltiSwitchWrapper\"),\n        ltiTooltip: document.getElementById(\"ltiTooltip\"),\n        ltiConfig: document.getElementById(\"ltiConfig\"),\n\n        webServicesSwitch: document.getElementById(\"webServicesSwitch\"),\n        webServicesStatus: document.getElementById(\"webServicesStatus\"),\n        webServicesConfig: document.getElementById(\"webServicesConfig\"),\n\n        liveApiSwitch: document.getElementById(\"liveApiSwitch\"),\n        liveApiStatus: document.getElementById(\"liveApiStatus\"),\n        liveApiConfig: document.getElementById(\"liveApiConfig\"),\n\n        ltiRemovalModal: document.getElementById(\"ltiRemovalModal\"),\n        closeLtiModal: document.getElementById(\"closeLtiModal\"),\n        confirmLtiRemoval: document.getElementById(\"confirmLtiRemoval\"),\n\n        aiAssessmentSwitch: document.getElementById(\"aiAssessmentSwitch\"),\n        aiAssessmentStatus: document.getElementById(\"aiAssessmentStatus\"),\n        courseIds: document.getElementById(\"courseIds\"),\n    };\n\n    // Initialize state from form values\n    if (elements.floatingButtonAssistantId) {\n        state.floatingButtonAssistantId = elements.floatingButtonAssistantId.value;\n    }\n\n    if (elements.ltiAssistantId) {\n        state.ltiAssistantId = elements.ltiAssistantId.value;\n    }\n\n    if (elements.floatingButtonStatus) {\n        state.showFloatingButton = parseInt(elements.form.elements.floatingButtonStatus.value) === 1;\n    }\n\n    if (elements.ltiStatus) {\n        state.ltiEnabled = parseInt(elements.form.elements.ltiStatus.value) === 1;\n    }\n\n    if (elements.webServicesStatus) {\n        state.webServicesEnabled = parseInt(elements.form.elements.webServicesStatus.value) === 1;\n    }\n\n    if (elements.liveApiStatus) {\n        state.liveApiEnabled = parseInt(elements.form.elements.liveApiStatus.value) === 1;\n    }\n\n    if (elements.aiAssessmentStatus) {\n        state.aiAssessmentEnabled = parseInt(elements.form.elements.aiAssessmentStatus.value) === 1;\n    }\n\n    if (elements.courseIds) {\n        state.courseIds = elements.courseIds.value;\n    }\n\n    /**\n     * Initializes all event listeners for the setup interface.\n     * Sets up handlers for input changes, switch toggles, modal interactions,\n     * and clipboard functionality.\n     *\n     * @function initializeEventListeners\n     * @private\n     */\n    function initializeEventListeners() {\n        // Floating button assistant ID input\n        elements.floatingButtonAssistantId.addEventListener(\"input\", function(e) {\n            state.floatingButtonAssistantId = e.target.value;\n            updateFloatingButtonSwitch();\n        });\n\n        // LTI assistant ID input\n        if (elements.ltiAssistantId) {\n            elements.ltiAssistantId.addEventListener(\"input\", function(e) {\n                state.ltiAssistantId = e.target.value;\n                updateLtiSwitch();\n            });\n        }\n\n        // Floating button switch\n        elements.floatingButtonSwitch.addEventListener(\"click\", function() {\n            if (canEnableFloatingButton()) {\n                state.showFloatingButton = !state.showFloatingButton;\n                updateFloatingButtonSwitch();\n            }\n        });\n\n        // Web services switch\n        elements.webServicesSwitch.addEventListener(\"click\", function() {\n            state.webServicesEnabled = !state.webServicesEnabled;\n            updateWebServicesSwitch();\n        });\n\n        // Live API switch\n        elements.liveApiSwitch.addEventListener(\"click\", function() {\n            state.liveApiEnabled = !state.liveApiEnabled;\n            updateLiveApiSwitch();\n        });\n\n        // Ai Assessment switch\n        elements.aiAssessmentSwitch.addEventListener(\"click\", function() {\n            state.aiAssessmentEnabled = !state.aiAssessmentEnabled;\n            updateAiAssessmentSwitch();\n        });\n\n        // Course ids input\n        elements.courseIds.addEventListener(\"input\", function(e) {\n            state.courseIds = e.target.value;\n            updateCourseIdsInput();\n        });\n\n        // Modal close on overlay click\n        elements.ltiRemovalModal.addEventListener(\"click\", function(e) {\n            if (e.target === elements.closeLtiModal) {\n                closeLtiModal();\n            }\n            if (e.target === elements.confirmLtiRemoval) {\n                confirmLtiRemoval();\n            }\n            if (e.target === elements.ltiRemovalModal) {\n                closeLtiModal();\n            }\n        });\n\n        // Environment radio buttons\n        var environmentRadios = document.querySelectorAll('input[name=\"environment\"]');\n        environmentRadios.forEach(function(radio) {\n            if (radio.checked) {\n                state.environment = radio.value;\n            }\n            radio.addEventListener(\"change\", function(e) {\n                if (e.target.checked) {\n                    state.environment = e.target.value;\n                    updateLtiConfig();\n                }\n            });\n        });\n\n        // LTI switch\n        if (elements.ltiSwitch) {\n            elements.ltiSwitch.addEventListener(\"click\", function() {\n                if (canEnableLti()) {\n                    if (state.ltiEnabled) {\n                        // Show confirmation modal\n                        elements.ltiRemovalModal.style.display = \"flex\";\n                    } else {\n                        state.ltiEnabled = true;\n                        updateLtiSwitch();\n                    }\n                }\n            });\n        }\n\n        // Initialize clipboard functionality\n        var clipboardInstance = new ClipboardJS('.copy-btn');\n        clipboardInstance.on('success', function(e) {\n            e.clearSelection();\n            Str.get_string('copied', 'local_learnwise')\n            .then(function(str) {\n                if (state.showToast) {\n                    require(['core/toast'], function(Toast) {\n                        Toast.add(str);\n                    });\n                } else {\n                    // eslint-disable-next-line no-alert\n                    alert(str);\n                }\n                return null;\n            })\n            .catch(Notification.exception);\n        });\n    }\n\n    /**\n     * Checks if the floating button can be enabled based on current state.\n     * Requires a valid assistant ID to be present.\n     *\n     * @function canEnableFloatingButton\n     * @private\n     * @returns {boolean} True if floating button can be enabled, false otherwise\n     */\n    function canEnableFloatingButton() {\n        return state.floatingButtonAssistantId.trim().length > 0;\n    }\n\n    /**\n     * Checks if LTI integration can be enabled based on current state.\n     * Requires a valid LTI assistant ID to be present.\n     *\n     * @function canEnableLti\n     * @private\n     * @returns {boolean} True if LTI can be enabled, false otherwise\n     */\n    function canEnableLti() {\n        return state.ltiAssistantId.trim().length > 0;\n    }\n\n    /**\n     * Updates the floating button switch UI and form state.\n     * Handles enabling/disabling the switch based on assistant ID availability,\n     * updates visual states, and synchronizes with form values.\n     *\n     * @function updateFloatingButtonSwitch\n     * @private\n     */\n    function updateFloatingButtonSwitch() {\n        var canEnable = canEnableFloatingButton();\n\n        if (canEnable) {\n            elements.floatingButtonSwitch.classList.remove(\"disabled\");\n            elements.floatingButtonSwitchWrapper.style.cursor = \"pointer\";\n            elements.floatingButtonTooltip.style.display = \"none\";\n\n            if (state.showFloatingButton) {\n                elements.floatingButtonSwitch.classList.add(\"active\");\n                Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                    elements.floatingButtonStatus.textContent = str;\n                    return null;\n                }).fail(Notification.exception);\n            } else {\n                elements.floatingButtonSwitch.classList.remove(\"active\");\n                Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                    elements.floatingButtonStatus.textContent = str;\n                    return null;\n                }).fail(Notification.exception);\n            }\n        } else {\n            elements.floatingButtonSwitch.classList.remove(\"active\");\n            elements.floatingButtonSwitch.classList.add(\"disabled\");\n            elements.floatingButtonSwitchWrapper.style.cursor = \"not-allowed\";\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.floatingButtonStatus.textContent = str;\n                return null;\n            }).fail(Notification.exception);\n            state.showFloatingButton = false;\n        }\n        elements.form.elements.floatingButtonStatus.value = state.showFloatingButton ? 1 : 0;\n    }\n\n    /**\n     * Updates the LTI configuration section by loading dynamic content.\n     * Fetches and renders LTI configuration HTML based on current state\n     * including environment and assistant ID settings.\n     *\n     * @function updateLtiConfig\n     * @private\n     */\n    function updateLtiConfig() {\n        if (!elements.ltiConfig || !canEnableLti() || !state.ltiEnabled) {\n            return;\n        }\n        Fragment.loadFragment('local_learnwise', 'process_setup', Config.contextid, {\n                formdata: 'enablelti=' + (state.ltiEnabled ? 1 : 0) +\n            '&assistantid=' + encodeURIComponent(elements.ltiAssistantId.value) +\n            '&environment=' + encodeURIComponent(state.environment)\n        }).then(function(html, js) {\n            Templates.replaceNodeContents(elements.ltiConfig, html, js);\n            return null;\n        }).catch(Notification.exception);\n    }\n\n    /**\n     * Updates the LTI switch UI and configuration visibility.\n     * Manages the LTI integration toggle state, updates visual indicators,\n     * and shows/hides the LTI configuration section accordingly.\n     *\n     * @function updateLtiSwitch\n     * @private\n     */\n    function updateLtiSwitch() {\n        if (!elements.ltiAssistantId) {\n            return;\n        }\n        var canEnable = canEnableLti();\n\n        if (canEnable) {\n            elements.ltiSwitch.classList.remove(\"disabled\");\n            elements.ltiSwitchWrapper.style.cursor = \"pointer\";\n            elements.ltiTooltip.style.display = \"none\";\n\n            if (state.ltiEnabled) {\n                elements.ltiSwitch.classList.add(\"active\");\n                Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                    elements.ltiStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n                elements.ltiConfig.style.display = \"block\";\n            } else {\n                elements.ltiSwitch.classList.remove(\"active\");\n                Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                    elements.ltiStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n                elements.ltiConfig.style.display = \"none\";\n            }\n            updateLtiConfig();\n        } else {\n            elements.ltiSwitch.classList.remove(\"active\");\n            elements.ltiSwitch.classList.add(\"disabled\");\n            elements.ltiSwitchWrapper.style.cursor = \"not-allowed\";\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.ltiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.ltiConfig.style.display = \"none\";\n            state.ltiEnabled = false;\n        }\n        elements.form.elements.ltiStatus.value = state.ltiEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the ai assessment switch UI and configuration.\n     * Toggles ai assessment functionality, updates status display\n     *\n     * @function updateWebServicesSwitch\n     * @private\n     */\n    function updateAiAssessmentSwitch() {\n        if (state.aiAssessmentEnabled) {\n            elements.aiAssessmentSwitch.classList.add(\"active\");\n            Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                elements.aiAssessmentStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n        } else {\n            elements.aiAssessmentSwitch.classList.remove(\"active\");\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.aiAssessmentStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n        }\n\n        elements.form.elements.aiAssessmentStatus.value = state.aiAssessmentEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the courseid\n     *\n     * @function updateCourseIdsInput\n     * @private\n     */\n    function updateCourseIdsInput() {\n        var pattern = /^(\\d+)(,\\d+)*$/;\n        var saveBtn = document.getElementById('save-btn');\n        var inputEl = elements.courseIds;\n\n        var value = (state.courseIds || \"\").trim();\n        if (!value) {\n            inputEl.classList.remove('border-danger');\n            saveBtn.disabled = false;\n            saveBtn.className = 'save-btn';\n            return;\n        }\n\n        var isValid = pattern.test(state.courseIds);\n        inputEl.classList.toggle('border-danger', !isValid);\n        saveBtn.disabled = !isValid;\n        saveBtn.className = isValid ? 'save-btn' : 'save-btn bg-gray text-dark';\n    }\n\n    /**\n     * Updates the web services switch UI and configuration.\n     * Toggles web services functionality, updates status display,\n     * and loads dynamic configuration content via Fragment API.\n     *\n     * @function updateWebServicesSwitch\n     * @private\n     */\n    function updateWebServicesSwitch() {\n        if (state.webServicesEnabled) {\n            elements.webServicesSwitch.classList.add(\"active\");\n            Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                elements.webServicesStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.webServicesConfig.style.display = \"block\";\n        } else {\n            elements.webServicesSwitch.classList.remove(\"active\");\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.webServicesStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.webServicesConfig.style.display = \"none\";\n        }\n        Fragment.loadFragment('local_learnwise', 'process_setup', Config.contextid, {\n            formdata: 'enablewebservice=' + (state.webServicesEnabled ? 1 : 0)\n        }).then(function(html, js) {\n            Templates.replaceNodeContents(elements.webServicesConfig, html, js);\n            return null;\n        }).catch(Notification.exception);\n\n        elements.form.elements.webServicesStatus.value = state.webServicesEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the live API switch UI and configuration visibility.\n     * Manages live API functionality toggle, updates status indicators,\n     * and controls the display of related configuration sections.\n     *\n     * @function updateLiveApiSwitch\n     * @private\n     */\n    function updateLiveApiSwitch() {\n        if (state.liveApiEnabled) {\n            elements.liveApiSwitch.classList.add(\"active\");\n            Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                elements.liveApiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.liveApiConfig.style.display = \"block\";\n        } else {\n            elements.liveApiSwitch.classList.remove(\"active\");\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.liveApiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.liveApiConfig.style.display = \"none\";\n        }\n        elements.form.elements.liveApiStatus.value = state.liveApiEnabled ? 1 : 0;\n    }\n\n    /**\n     * Closes the LTI removal confirmation modal.\n     * Hides the modal dialog by setting display style to none.\n     *\n     * @function closeLtiModal\n     * @private\n     */\n    function closeLtiModal() {\n        elements.ltiRemovalModal.style.display = \"none\";\n    }\n\n    /**\n     * Confirms LTI removal and updates the interface.\n     * Disables LTI integration, updates the switch state,\n     * and closes the confirmation modal.\n     *\n     * @function confirmLtiRemoval\n     * @private\n     */\n    function confirmLtiRemoval() {\n        state.ltiEnabled = false;\n        updateLtiSwitch();\n        closeLtiModal();\n    }\n\n    /**\n     * Public API for the setup module.\n     * Provides initialization method to set up the entire interface.\n     *\n     * @namespace\n     * @public\n     */\n    return {\n        /**\n         * Initializes the LearnWise setup interface.\n         * Sets up event listeners, initializes state, and updates all UI components.\n         *\n         * @function init\n         * @param {boolean} showToast - Whether to show toast notifications for user feedback\n         * @public\n         */\n        init: function(showToast) {\n            state.showToast = showToast;\n            initializeEventListeners();\n\n            // Initial state updates\n            updateFloatingButtonSwitch();\n            updateLtiSwitch();\n            updateWebServicesSwitch();\n            updateLiveApiSwitch();\n            updateAiAssessmentSwitch();\n        }\n    };\n\n});"],"names":["define","M","cfg","wwwroot","ClipboardJS","Str","Notification","Fragment","Config","Templates","state","environment","floatingButtonAssistantId","showFloatingButton","ltiAssistantId","ltiEnabled","webServicesEnabled","liveApiEnabled","aiAssessmentEnabled","courseIds","elements","form","document","getElementById","floatingButtonSwitch","floatingButtonStatus","floatingButtonSwitchWrapper","floatingButtonTooltip","ltiSwitch","ltiStatus","ltiSwitchWrapper","ltiTooltip","ltiConfig","webServicesSwitch","webServicesStatus","webServicesConfig","liveApiSwitch","liveApiStatus","liveApiConfig","ltiRemovalModal","closeLtiModal","confirmLtiRemoval","aiAssessmentSwitch","aiAssessmentStatus","initializeEventListeners","addEventListener","e","target","value","updateFloatingButtonSwitch","updateLtiSwitch","canEnableFloatingButton","updateWebServicesSwitch","updateLiveApiSwitch","updateAiAssessmentSwitch","pattern","saveBtn","inputEl","trim","classList","remove","disabled","className","isValid","test","toggle","updateCourseIdsInput","querySelectorAll","forEach","radio","checked","updateLtiConfig","canEnableLti","style","display","on","clearSelection","get_string","then","str","showToast","require","Toast","add","alert","catch","exception","length","cursor","textContent","fail","loadFragment","contextid","formdata","encodeURIComponent","html","js","replaceNodeContents","parseInt","init"],"mappings":"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"}