{"version":3,"file":"setup.min.js","sources":["../src/setup.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * LearnWise setup module for managing plugin configuration interface.\n * Handles floating button, LTI integration, web services, and live API settings.\n *\n * @module     local_learnwise/setup\n * @copyright  2025 LearnWise <help@learnwise.ai>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(\n    [M.cfg.wwwroot + '/local/learnwise/vendorjs/zenorocha/clipboard.min.js',\n        'core/str', 'core/notification', 'core/fragment', 'core/config', 'core/templates'],\n    function(ClipboardJS, Str, Notification, Fragment, Config, Templates) {\n\n    /**\n     * Application state object containing all configuration settings\n     * @type {Object}\n     * @property {string} environment - Current environment (sandbox/production)\n     * @property {string} floatingButtonAssistantId - Assistant ID for floating button\n     * @property {boolean} showFloatingButton - Whether floating button is enabled\n     * @property {string} ltiAssistantId - Assistant ID for LTI integration\n     * @property {boolean} ltiEnabled - Whether LTI integration is enabled\n     * @property {boolean} webServicesEnabled - Whether web services are enabled\n     * @property {boolean} liveApiEnabled - Whether live API is enabled\n     * @property {boolean} showToast - Whether to show toast notifications\n     */\n    var state = {\n        environment: \"sandbox\",\n        floatingButtonAssistantId: \"\",\n        showFloatingButton: false,\n        ltiAssistantId: \"\",\n        ltiEnabled: false,\n        webServicesEnabled: false,\n        liveApiEnabled: false,\n        aiAssessmentEnabled: false,\n        courseIds: \"\",\n        aiAssessmentAssistantId: \"\",\n    };\n\n    /**\n     * DOM elements cache for efficient access to form elements and controls\n     * @type {Object}\n     */\n    var elements = {\n        form: document.getElementById('form1'),\n        floatingButtonAssistantId: document.getElementById(\"floatingButtonAssistantId\"),\n        floatingButtonSwitch: document.getElementById(\"floatingButtonSwitch\"),\n        floatingButtonStatus: document.getElementById(\"floatingButtonStatus\"),\n        floatingButtonSwitchWrapper: document.getElementById(\"floatingButtonSwitchWrapper\"),\n        floatingButtonTooltip: document.getElementById(\"floatingButtonTooltip\"),\n\n        ltiAssistantId: document.getElementById(\"ltiAssistantId\"),\n        ltiSwitch: document.getElementById(\"ltiSwitch\"),\n        ltiStatus: document.getElementById(\"ltiStatus\"),\n        ltiSwitchWrapper: document.getElementById(\"ltiSwitchWrapper\"),\n        ltiTooltip: document.getElementById(\"ltiTooltip\"),\n        ltiConfig: document.getElementById(\"ltiConfig\"),\n\n        webServicesSwitch: document.getElementById(\"webServicesSwitch\"),\n        webServicesStatus: document.getElementById(\"webServicesStatus\"),\n        webServicesConfig: document.getElementById(\"webServicesConfig\"),\n\n        liveApiSwitch: document.getElementById(\"liveApiSwitch\"),\n        liveApiStatus: document.getElementById(\"liveApiStatus\"),\n        liveApiConfig: document.getElementById(\"liveApiConfig\"),\n\n        ltiRemovalModal: document.getElementById(\"ltiRemovalModal\"),\n        closeLtiModal: document.getElementById(\"closeLtiModal\"),\n        confirmLtiRemoval: document.getElementById(\"confirmLtiRemoval\"),\n\n        aiAssessmentSwitch: document.getElementById(\"aiAssessmentSwitch\"),\n        aiAssessmentAssistantId: document.getElementById(\"aiAssessmentAssistantId\"),\n        aiAssessmentSwitchWrapper: document.getElementById(\"aiAssessmentSwitchWrapper\"),\n        aiAssessmentTooltip: document.getElementById(\"aiAssessmentTooltip\"),\n        aiAssessmentStatus: document.getElementById(\"aiAssessmentStatus\"),\n        courseIds: document.getElementById(\"courseIds\"),\n    };\n\n    // Initialize state from form values\n    if (elements.floatingButtonAssistantId) {\n        state.floatingButtonAssistantId = elements.floatingButtonAssistantId.value;\n    }\n\n    if (elements.ltiAssistantId) {\n        state.ltiAssistantId = elements.ltiAssistantId.value;\n    }\n\n    if (elements.aiAssessmentAssistantId) {\n        state.aiAssessmentAssistantId = elements.aiAssessmentAssistantId.value;\n    }\n\n    if (elements.floatingButtonStatus) {\n        state.showFloatingButton = parseInt(elements.form.elements.floatingButtonStatus.value) === 1;\n    }\n\n    if (elements.ltiStatus) {\n        state.ltiEnabled = parseInt(elements.form.elements.ltiStatus.value) === 1;\n    }\n\n    if (elements.webServicesStatus) {\n        state.webServicesEnabled = parseInt(elements.form.elements.webServicesStatus.value) === 1;\n    }\n\n    if (elements.liveApiStatus) {\n        state.liveApiEnabled = parseInt(elements.form.elements.liveApiStatus.value) === 1;\n    }\n\n    if (elements.aiAssessmentStatus) {\n        state.aiAssessmentEnabled = parseInt(elements.form.elements.aiAssessmentStatus.value) === 1;\n    }\n\n    if (elements.courseIds) {\n        state.courseIds = elements.courseIds.value;\n    }\n\n    /**\n     * Initializes all event listeners for the setup interface.\n     * Sets up handlers for input changes, switch toggles, modal interactions,\n     * and clipboard functionality.\n     *\n     * @function initializeEventListeners\n     * @private\n     */\n    function initializeEventListeners() {\n        // Floating button assistant ID input\n        elements.floatingButtonAssistantId.addEventListener(\"input\", function(e) {\n            state.floatingButtonAssistantId = e.target.value;\n            updateFloatingButtonSwitch();\n        });\n\n        // LTI assistant ID input\n        if (elements.ltiAssistantId) {\n            elements.ltiAssistantId.addEventListener(\"input\", function(e) {\n                state.ltiAssistantId = e.target.value;\n                updateLtiSwitch();\n            });\n        }\n\n        // AI Assessment assistant ID input\n        if (elements.aiAssessmentAssistantId) {\n            elements.aiAssessmentAssistantId.addEventListener(\"input\", function(e) {\n                state.aiAssessmentAssistantId = e.target.value;\n                updateAiAssessmentSwitch();\n            });\n        }\n\n        // Floating button switch\n        elements.floatingButtonSwitch.addEventListener(\"click\", function() {\n            if (canEnableFloatingButton()) {\n                state.showFloatingButton = !state.showFloatingButton;\n                updateFloatingButtonSwitch();\n            }\n        });\n\n        // Web services switch\n        elements.webServicesSwitch.addEventListener(\"click\", function() {\n            state.webServicesEnabled = !state.webServicesEnabled;\n            updateWebServicesSwitch();\n        });\n\n        // Live API switch\n        elements.liveApiSwitch.addEventListener(\"click\", function() {\n            state.liveApiEnabled = !state.liveApiEnabled;\n            updateLiveApiSwitch();\n        });\n\n        // Ai Assessment switch\n        elements.aiAssessmentSwitch.addEventListener(\"click\", function() {\n            state.aiAssessmentEnabled = !state.aiAssessmentEnabled;\n            updateAiAssessmentSwitch();\n        });\n\n        // Course ids input\n        elements.courseIds.addEventListener(\"input\", function(e) {\n            state.courseIds = e.target.value;\n            updateCourseIdsInput();\n        });\n\n        // Modal close on overlay click\n        elements.ltiRemovalModal.addEventListener(\"click\", function(e) {\n            if (e.target === elements.closeLtiModal) {\n                closeLtiModal();\n            }\n            if (e.target === elements.confirmLtiRemoval) {\n                confirmLtiRemoval();\n            }\n            if (e.target === elements.ltiRemovalModal) {\n                closeLtiModal();\n            }\n        });\n\n        // Environment radio buttons\n        var environmentRadios = document.querySelectorAll('input[name=\"environment\"]');\n        environmentRadios.forEach(function(radio) {\n            if (radio.checked) {\n                state.environment = radio.value;\n            }\n            radio.addEventListener(\"change\", function(e) {\n                if (e.target.checked) {\n                    state.environment = e.target.value;\n                    updateLtiConfig();\n                }\n            });\n        });\n\n        // LTI switch\n        if (elements.ltiSwitch) {\n            elements.ltiSwitch.addEventListener(\"click\", function() {\n                if (canEnableLti()) {\n                    if (state.ltiEnabled) {\n                        // Show confirmation modal\n                        elements.ltiRemovalModal.style.display = \"flex\";\n                    } else {\n                        state.ltiEnabled = true;\n                        updateLtiSwitch();\n                    }\n                }\n            });\n        }\n\n        // Initialize clipboard functionality\n        var clipboardInstance = new ClipboardJS('.copy-btn');\n        clipboardInstance.on('success', function(e) {\n            e.clearSelection();\n            Str.get_string('copied', 'local_learnwise')\n            .then(function(str) {\n                if (state.showToast) {\n                    require(['core/toast'], function(Toast) {\n                        Toast.add(str);\n                    });\n                } else {\n                    // eslint-disable-next-line no-alert\n                    alert(str);\n                }\n                return null;\n            })\n            .catch(Notification.exception);\n        });\n    }\n\n    /**\n     * Checks if the floating button can be enabled based on current state.\n     * Requires a valid assistant ID to be present.\n     *\n     * @function canEnableFloatingButton\n     * @private\n     * @returns {boolean} True if floating button can be enabled, false otherwise\n     */\n    function canEnableFloatingButton() {\n        return state.floatingButtonAssistantId.trim().length > 0;\n    }\n\n    /**\n     * Checks if Aiassessment integration can be enabled based on current state.\n     * Requires a valid Aiassessment assistant ID to be present.\n     *\n     * @function canEnableAiassessment\n     * @private\n     * @returns {boolean} True if LTI can be enabled, false otherwise\n     */\n    function canEnableAiassessment() {\n        return state.aiAssessmentAssistantId.trim().length > 0;\n    }\n\n    /**\n     * Checks if LTI integration can be enabled based on current state.\n     * Requires a valid LTI assistant ID to be present.\n     *\n     * @function canEnableLti\n     * @private\n     * @returns {boolean} True if LTI can be enabled, false otherwise\n     */\n    function canEnableLti() {\n        return state.ltiAssistantId.trim().length > 0;\n    }\n\n    /**\n     * Updates the floating button switch UI and form state.\n     * Handles enabling/disabling the switch based on assistant ID availability,\n     * updates visual states, and synchronizes with form values.\n     *\n     * @function updateFloatingButtonSwitch\n     * @private\n     */\n    function updateFloatingButtonSwitch() {\n        var canEnable = canEnableFloatingButton();\n\n        if (canEnable) {\n            elements.floatingButtonSwitch.classList.remove(\"disabled\");\n            elements.floatingButtonSwitchWrapper.style.cursor = \"pointer\";\n            elements.floatingButtonTooltip.style.display = \"none\";\n\n            if (state.showFloatingButton) {\n                elements.floatingButtonSwitch.classList.add(\"active\");\n                Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                    elements.floatingButtonStatus.textContent = str;\n                    return null;\n                }).fail(Notification.exception);\n            } else {\n                elements.floatingButtonSwitch.classList.remove(\"active\");\n                Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                    elements.floatingButtonStatus.textContent = str;\n                    return null;\n                }).fail(Notification.exception);\n            }\n        } else {\n            elements.floatingButtonSwitch.classList.remove(\"active\");\n            elements.floatingButtonSwitch.classList.add(\"disabled\");\n            elements.floatingButtonSwitchWrapper.style.cursor = \"not-allowed\";\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.floatingButtonStatus.textContent = str;\n                return null;\n            }).fail(Notification.exception);\n            state.showFloatingButton = false;\n        }\n        elements.form.elements.floatingButtonStatus.value = state.showFloatingButton ? 1 : 0;\n    }\n\n    /**\n     * Updates the LTI configuration section by loading dynamic content.\n     * Fetches and renders LTI configuration HTML based on current state\n     * including environment and assistant ID settings.\n     *\n     * @function updateLtiConfig\n     * @private\n     */\n    function updateLtiConfig() {\n        if (!elements.ltiConfig || !canEnableLti() || !state.ltiEnabled) {\n            return;\n        }\n        Fragment.loadFragment('local_learnwise', 'process_setup', Config.contextid, {\n                formdata: 'enablelti=' + (state.ltiEnabled ? 1 : 0) +\n            '&assistantid=' + encodeURIComponent(elements.ltiAssistantId.value) +\n            '&environment=' + encodeURIComponent(state.environment)\n        }).then(function(html, js) {\n            Templates.replaceNodeContents(elements.ltiConfig, html, js);\n            return null;\n        }).catch(Notification.exception);\n    }\n\n    /**\n     * Updates the LTI switch UI and configuration visibility.\n     * Manages the LTI integration toggle state, updates visual indicators,\n     * and shows/hides the LTI configuration section accordingly.\n     *\n     * @function updateLtiSwitch\n     * @private\n     */\n    function updateLtiSwitch() {\n        if (!elements.ltiAssistantId) {\n            return;\n        }\n        var canEnable = canEnableLti();\n\n        if (canEnable) {\n            elements.ltiSwitch.classList.remove(\"disabled\");\n            elements.ltiSwitchWrapper.style.cursor = \"pointer\";\n            elements.ltiTooltip.style.display = \"none\";\n\n            if (state.ltiEnabled) {\n                elements.ltiSwitch.classList.add(\"active\");\n                Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                    elements.ltiStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n                elements.ltiConfig.style.display = \"block\";\n            } else {\n                elements.ltiSwitch.classList.remove(\"active\");\n                Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                    elements.ltiStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n                elements.ltiConfig.style.display = \"none\";\n            }\n            updateLtiConfig();\n        } else {\n            elements.ltiSwitch.classList.remove(\"active\");\n            elements.ltiSwitch.classList.add(\"disabled\");\n            elements.ltiSwitchWrapper.style.cursor = \"not-allowed\";\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.ltiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.ltiConfig.style.display = \"none\";\n            state.ltiEnabled = false;\n        }\n        elements.form.elements.ltiStatus.value = state.ltiEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the ai assessment switch UI and configuration.\n     * Toggles ai assessment functionality, updates status display\n     *\n     * @function updateAiAssessmentSwitch\n     * @private\n     */\n    function updateAiAssessmentSwitch() {\n         if (!elements.aiAssessmentAssistantId) {\n            return;\n        }\n        var canEnable = canEnableAiassessment();\n        if (canEnable) {\n            elements.aiAssessmentSwitch.classList.remove(\"disabled\");\n            elements.aiAssessmentSwitchWrapper.style.cursor = \"pointer\";\n            elements.aiAssessmentTooltip.style.display = \"none\";\n\n            if (state.aiAssessmentEnabled) {\n                elements.aiAssessmentSwitch.classList.add(\"active\");\n                Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                    elements.aiAssessmentStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n            } else {\n                elements.aiAssessmentSwitch.classList.remove(\"active\");\n                Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                    elements.aiAssessmentStatus.textContent = str;\n                    return null;\n                }).catch(Notification.exception);\n            }\n        } else {\n            elements.aiAssessmentSwitch.classList.remove(\"active\");\n            elements.aiAssessmentSwitch.classList.add(\"disabled\");\n            elements.aiAssessmentSwitchWrapper.style.cursor = \"not-allowed\";\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.aiAssessmentStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            state.aiAssessmentEnabled = false;\n        }\n\n        elements.form.elements.aiAssessmentStatus.value = state.aiAssessmentEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the courseid\n     *\n     * @function updateCourseIdsInput\n     * @private\n     */\n    function updateCourseIdsInput() {\n        var pattern = /^(\\d+)(,\\d+)*$/;\n        var saveBtn = document.getElementById('save-btn');\n        var inputEl = elements.courseIds;\n\n        var value = (state.courseIds || \"\").trim();\n        if (!value) {\n            inputEl.classList.remove('border-danger');\n            saveBtn.disabled = false;\n            saveBtn.className = 'save-btn';\n            return;\n        }\n\n        var isValid = pattern.test(state.courseIds);\n        inputEl.classList.toggle('border-danger', !isValid);\n        saveBtn.disabled = !isValid;\n        saveBtn.className = isValid ? 'save-btn' : 'save-btn bg-gray text-dark';\n    }\n\n    /**\n     * Updates the web services switch UI and configuration.\n     * Toggles web services functionality, updates status display,\n     * and loads dynamic configuration content via Fragment API.\n     *\n     * @function updateWebServicesSwitch\n     * @private\n     */\n    function updateWebServicesSwitch() {\n        if (state.webServicesEnabled) {\n            elements.webServicesSwitch.classList.add(\"active\");\n            Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                elements.webServicesStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.webServicesConfig.style.display = \"block\";\n        } else {\n            elements.webServicesSwitch.classList.remove(\"active\");\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.webServicesStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.webServicesConfig.style.display = \"none\";\n        }\n        Fragment.loadFragment('local_learnwise', 'process_setup', Config.contextid, {\n            formdata: 'enablewebservice=' + (state.webServicesEnabled ? 1 : 0)\n        }).then(function(html, js) {\n            Templates.replaceNodeContents(elements.webServicesConfig, html, js);\n            return null;\n        }).catch(Notification.exception);\n\n        elements.form.elements.webServicesStatus.value = state.webServicesEnabled ? 1 : 0;\n    }\n\n    /**\n     * Updates the live API switch UI and configuration visibility.\n     * Manages live API functionality toggle, updates status indicators,\n     * and controls the display of related configuration sections.\n     *\n     * @function updateLiveApiSwitch\n     * @private\n     */\n    function updateLiveApiSwitch() {\n        if (state.liveApiEnabled) {\n            elements.liveApiSwitch.classList.add(\"active\");\n            Str.get_string('statusenabled', 'local_learnwise').then(function(str) {\n                elements.liveApiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.liveApiConfig.style.display = \"block\";\n        } else {\n            elements.liveApiSwitch.classList.remove(\"active\");\n            Str.get_string('statusdisabled', 'local_learnwise').then(function(str) {\n                elements.liveApiStatus.textContent = str;\n                return null;\n            }).catch(Notification.exception);\n            elements.liveApiConfig.style.display = \"none\";\n        }\n        elements.form.elements.liveApiStatus.value = state.liveApiEnabled ? 1 : 0;\n    }\n\n    /**\n     * Closes the LTI removal confirmation modal.\n     * Hides the modal dialog by setting display style to none.\n     *\n     * @function closeLtiModal\n     * @private\n     */\n    function closeLtiModal() {\n        elements.ltiRemovalModal.style.display = \"none\";\n    }\n\n    /**\n     * Confirms LTI removal and updates the interface.\n     * Disables LTI integration, updates the switch state,\n     * and closes the confirmation modal.\n     *\n     * @function confirmLtiRemoval\n     * @private\n     */\n    function confirmLtiRemoval() {\n        state.ltiEnabled = false;\n        updateLtiSwitch();\n        closeLtiModal();\n    }\n\n    /**\n     * Public API for the setup module.\n     * Provides initialization method to set up the entire interface.\n     *\n     * @namespace\n     * @public\n     */\n    return {\n        /**\n         * Initializes the LearnWise setup interface.\n         * Sets up event listeners, initializes state, and updates all UI components.\n         *\n         * @function init\n         * @param {boolean} showToast - Whether to show toast notifications for user feedback\n         * @public\n         */\n        init: function(showToast) {\n            state.showToast = showToast;\n            initializeEventListeners();\n\n            // Initial state updates\n            updateFloatingButtonSwitch();\n            updateLtiSwitch();\n            updateWebServicesSwitch();\n            updateLiveApiSwitch();\n            updateAiAssessmentSwitch();\n        }\n    };\n\n});"],"names":["define","M","cfg","wwwroot","ClipboardJS","Str","Notification","Fragment","Config","Templates","state","environment","floatingButtonAssistantId","showFloatingButton","ltiAssistantId","ltiEnabled","webServicesEnabled","liveApiEnabled","aiAssessmentEnabled","courseIds","aiAssessmentAssistantId","elements","form","document","getElementById","floatingButtonSwitch","floatingButtonStatus","floatingButtonSwitchWrapper","floatingButtonTooltip","ltiSwitch","ltiStatus","ltiSwitchWrapper","ltiTooltip","ltiConfig","webServicesSwitch","webServicesStatus","webServicesConfig","liveApiSwitch","liveApiStatus","liveApiConfig","ltiRemovalModal","closeLtiModal","confirmLtiRemoval","aiAssessmentSwitch","aiAssessmentSwitchWrapper","aiAssessmentTooltip","aiAssessmentStatus","initializeEventListeners","addEventListener","e","target","value","updateFloatingButtonSwitch","updateLtiSwitch","updateAiAssessmentSwitch","canEnableFloatingButton","updateWebServicesSwitch","updateLiveApiSwitch","pattern","saveBtn","inputEl","trim","classList","remove","disabled","className","isValid","test","toggle","updateCourseIdsInput","querySelectorAll","forEach","radio","checked","updateLtiConfig","canEnableLti","style","display","on","clearSelection","get_string","then","str","showToast","require","Toast","add","alert","catch","exception","length","cursor","textContent","fail","loadFragment","contextid","formdata","encodeURIComponent","html","js","replaceNodeContents","parseInt","init"],"mappings":"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"}