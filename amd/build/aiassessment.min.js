define(["jquery","core/ajax","core/notification"],function(a,b,c){return{setup:!1,init:function(){var d=this,e=a(document);e.on("finish-loading-user",function(){var a=e.find('[data-region="user-info"]'),f=a.attr("data-assignmentid"),g=a.attr("data-userid");if(!g){var h=a.closest('[data-region="grading-navigation-panel"]');g=h.data("first-userid")}return d.setup?void d.redirectUserGrading(g):void b.call([{methodname:"local_learnwise_assign_get_submission",args:{assignid:f,userid:g}}])[0].then(function(a){return d.setup=!0,document.dispatchEvent(new CustomEvent("initLearnWiseAssessment",{detail:a})),null})["catch"](c.exception)}).on("user-changed",function(a,b){d.setup&&(a.stopPropagation(),d.redirectUserGrading(b))})},redirectUserGrading:function(a){var b=new URL(location.href);b.searchParams["delete"]("userid"),b.searchParams.append("userid",a),location.href=b.toString()}}});